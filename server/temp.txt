/**
envia propriedades do place
*/
server.action.getProp = function (client, data) {

	var result = {c: data.c, p: {name : "servidor principal"}};
	client.socket.send(JSON.stringify(result));
};

/**
envia lista de lobbys
 */
server.action.listLobby = function (client, data) {
	var i,
	result = [];

	for (i = 0; i < client.place.contents.length; i += 1) {
		result.push({
			uid : client.place.contents[i].uid,
			type : client.place.contents[i].type
		});
	}
	client.socket.send(JSON.stringify(result));
};

/**
entra no lobby
 */
server.action.enterLobby = function (client, data) {
	var i, place, oldplace = client.place;
	for (i = 0; i < client.place.contents.length; i += 1) {
		place = client.place.contents[i];
		if (place.uid.toString() === data.uid) {			
			
			oldplace.removeClient(client);
			place.addClient(client);
			client.place = place;
			
			return;
		}
	}
};
/**
define mapa de comandos
 */
server.command = {

	"sv1" : "getProp",
	"sv2" : "setProp",
	"sv3" : "unsetProp",
	"sv4" : "getInfo",
	"sv5" : "listLobby",
	"sv6" : "enterLobby"
};
